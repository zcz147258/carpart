(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/map/map"],{"098d":function(t,e,a){},"12ad":function(t,e,a){"use strict";a.r(e);var i=a("aee9"),n=a("471e");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("eede");var s,r=a("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"2082ef8a",null,!1,i["a"],s);e["default"]=c.exports},"27b5":function(t,e,a){"use strict";(function(t){a("949b"),a("921b");i(a("66fd"));var e=i(a("12ad"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"309d":function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("2f62");function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){s(t,e,a[e])})}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,dataType:1,type:"center",scal:16,dis:!1,bot_data:{id:"",latitude:"",longitude:"",total:"",free:""},title:"map",latitude:39.9,longitude:116.39,centeraddress:"",covers:[],myPosition:{id:"1",latitude:"",longitude:"",iconPath:"../../static/tabbar/naber1.png",label:{content:"你的位置",color:"black",anchorX:0,anchorY:-80,bgColor:"#fff",padding:5,borderWidth:1,borderColor:"#D84C29",textAlign:"right"}},polyline:[],controls:[{id:"p",position:{left:30,top:this.CustomBar+30,width:40,height:40},iconPath:"../../static/position/1.png",clickable:!0},{id:"jia",position:{left:this.ScreenWidth-40,top:this.ScreenHeight-this.CustomBar-165,width:35,height:35},iconPath:"../../static/position/jia.png",clickable:!0},{id:"jian",position:{left:this.ScreenWidth-40,top:this.ScreenHeight-this.CustomBar-125,width:35,height:35},iconPath:"../../static/position/jian.png",clickable:!0}],mockdata:[],setTimeoutFlag:!0}},onShow:function(){this.$checkLogin(),this.searchText&&this.getroad(this.searchText)},onLoad:function(){var e=this;this.covers.push(this.myPosition),t.getLocation({type:"wgs84",geocode:!0,success:function(t){e.centeraddress=t.address.poiName,e.latitude=t.latitude,e.longitude=t.longitude,e.myPosition.latitude=t.latitude,e.myPosition.longitude=t.longitude}}),this.getinfo()},methods:o({},(0,n.mapMutations)(["changeSearchText"]),{clean:function(){this.changeSearchText("")},tapSearch:function(){this.dis=!1,t.navigateTo({url:"./search?dataType="+this.dataType+"&searchText="+this.searchText})},tapMap:function(){this.dis=!1},getroad:function(t){var e=this;1==this.dataType?this.$http.request({url:"/wx/jsonQueryPlace",data:{longitudef:this.longitude,latitudef:this.latitude,roadName:t,pageSize:"100"},success:function(t){console.log(i(t," at pages\\map\\map.vue:192")),t.data.success?t.data.result.jaRoads.length>0?(e.longitude=t.data.result.jaRoads[0].fLng0,e.latitude=t.data.result.jaRoads[0].fLat0):e.$api.msg("未查询相应结果"):e.$api.msg(t.data.errorText)}}):this.$api.msg("暂时无法搜索")},getinfo:function(){var t=this,e="";e=1==this.dataType?"/wx/jsonQueryPlace":"/wx/jsonParkLotList",this.$http.request({url:e,data:{longitudef:this.longitude,latitudef:this.latitude,pageSize:"100"},success:function(e){if(e.data.success){var a=[],i=[];i=1==t.dataType?e.data.result.jaRoads:e.data.result.parkLots,i.forEach(function(e,i){var n={};1==t.dataType?(n.id=e.sRoadName,n.latitude=e.fLat0,n.longitude=e.fLng0,n.free=e.iFreeNum,n.total=e.iTotalNum):(n.id=e.park_name,n.latitude=e.lat_enter,n.longitude=e.lng_enter,n.free=e.free_num,n.total=e.total_num),n.address=e.address,n.iconPath="../../static/position/position.png",a.push(n)}),t.mockdata=a,t.covers=a,t.covers.push(t.myPosition)}else t.$api.msg(e.data.errorText)}})},changp:function(t){var e=this;this.dis=!1,"p"==t.controlId&&(this.setTimeoutFlag?(this.setTimeoutFlag=!1,setTimeout(function(){e.setTimeoutFlag=!0},3e3),1==this.dataType?(this.dataType=2,this.$api.msg("已切换至场库停车"),this.controls[0].iconPath="../../static/position/2.png"):(this.dataType=1,this.$api.msg("已切换至道路停车"),this.controls[0].iconPath="../../static/position/1.png"),this.getinfo()):this.$api.msg("您点击太快了")),"jia"==t.controlId&&(this.scal++,this.scal>18&&(this.scal=18)),"jian"==t.controlId&&(this.scal--,this.scal<5&&(this.scal=5))},turnapp:function(){var e=this.bot_data;t.openLocation({latitude:e.latitude,longitude:e.longitude,name:e.id,address:e.address})},clickbj:function(e){var a=this;if("1"==e.markerId)return this.dis=!1;t.showLoading({title:"加载中...",success:function(){a.dis=!1}}),setTimeout(function(){t.hideLoading(),a.covers.forEach(function(t,i){e.markerId==t.id&&(a.bot_data={latitude:t.latitude,longitude:t.longitude,id:t.id,free:t.free,total:t.total,address:t.address})}),"1"!=a.bot_data.id&&(a.dis=!0)},500)},distance:function(t,e,a,i){var n=t*Math.PI/180,o=a*Math.PI/180,s=n-o,r=e*Math.PI/180-i*Math.PI/180,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(r/2),2)));return c*=6378.137,c=Math.round(1e4*c)/1e4,c}}),computed:o({},(0,n.mapState)(["searchText"]),{calcdistance:function(){var t=this.distance(this.myPosition.latitude,this.myPosition.longitude,this.bot_data.latitude,this.bot_data.longitude);return t.toFixed(1)+"km"},style:function(){var t=this.StatusBar,e=this.CustomBar,a=this.bgImage,i="height:".concat(e,"px;padding-top:").concat(t,"px;");return this.bgImage&&(i="".concat(i,"background-image:url(").concat(a,");")),i}})};e.default=r}).call(this,a("6e42")["default"],a("0de9")["default"])},"471e":function(t,e,a){"use strict";a.r(e);var i=a("309d"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},aee9:function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i})},eede:function(t,e,a){"use strict";var i=a("098d"),n=a.n(i);n.a}},[["27b5","common/runtime","common/vendor"]]]);