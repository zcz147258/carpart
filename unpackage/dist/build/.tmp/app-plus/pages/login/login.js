(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"21bb":function(t,e,n){},"312c":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){return n.e("components/modal/modal").then(n.bind(null,"88a1"))},r={components:{modal:u},data:function(){return{loading:!1,name:"11",Services:{},progress:"0%",isproshow:!1,updateState:0,modalName:null,modalContent:"",res:null,version:"",file:null}},onShow:function(){null!=this.file&&this.install()},onLoad:function(){var e=this;t.showLoading({title:"正在检查更新"});var n=this;setTimeout(function(){n.loading=!0},500),this.version=plus.runtime.version,this.$http.request({url:"/app_upgrade/jsonVersion",data:{version:this.version,android:!0,flag:!1},success:function(t){t.data.success?t.data.downloadUrl?(e.updateState=1,e.modalContent="发现新版本，请您立即更新！",e.modalName="DialogModal1",e.res=t):e.updateState=9:(e.updateState=9,e.$api.msg(t.data.errorText))},fail:function(t){e.updateState=9,e.$api.msg("检查更新失败")},complete:function(){t.hideLoading()}})},onBackPress:function(t){if("backbutton"==t.from)return!0},methods:o({},(0,i.mapMutations)(["login"]),{modalNameChange:function(t){this.modalName=t},sure:function(){var t=this,e=this.res;this.updateState=2,this.isproshow=!0;var n=this.$http.downloadFile({url:e.data.downloadUrl+"?flag=false&android=true",success:function(e){t.file=e.tempFilePath,200==e.statusCode&&(t.isproshow=!1,t.install())},fail:function(e){t.updateState=9,t.$api.msg("下载失败")}});n.onProgressUpdate(function(e){t.progress=e.progress+"%",100==e.progress&&(t.updateState=3,t.isproshow=!1)})},getPhone:function(){var e=this;this.$http.request({url:"/wx/isItRegister",success:function(n){n.data.config?n.data.success?(e.login(n.data.customer),t.navigateBack({delta:1})):t.navigateTo({url:"../bindtel/bindtel"}):e.$api.msg("手机号注册失败")}})},getUserInfo:function(t){var e=this;this.$http.request({url:"/appc/jsonLogin",data:{code:t},success:function(t){t&&t.data&&t.data.success?e.getPhone():e.$api.msg(t.data.errorText)}})},loginin:function(){var t,e,n=this;return 0==this.updateState?this.$api.msg("正在检查更新"):1==this.updateState?this.$api.msg("发现新版本"):2==this.updateState?this.$api.msg("更新中"):3==this.updateState?this.$api.msg("请安装新版本"):8==this.updateState?this.$api.msg("安装失败请重新安装"):void plus.oauth.getServices(function(a){t=a,Object.keys(t).some(function(n){"weixin"==t[n].id&&(e=t[n])}),e.authorize(function(t){n.getUserInfo(t.code)},function(t){this.$api.msg(t.message)})},function(t){console.log(a(t," at pages\\login\\login.vue:231"))})},install:function(){plus.runtime.install(this.file,{},function(){this.$api.msg("安装成功"),this.updateState=9,this.file=null},function(t){this.updateState=8,this.$api.msg("安装失败"),console.log(a(t," at pages\\login\\login.vue:254"))})}})};e.default=r}).call(this,n("6e42")["default"],n("0de9")["default"])},"6abd":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},b8fc:function(t,e,n){"use strict";n.r(e);var a=n("312c"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},bcd7:function(t,e,n){"use strict";n.r(e);var a=n("6abd"),i=n("b8fc");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("d6d7");var s,u=n("f0c5"),r=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"334f7496",null,!1,a["a"],s);e["default"]=r.exports},d4bf:function(t,e,n){"use strict";(function(t){n("949b"),n("921b");a(n("66fd"));var e=a(n("bcd7"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},d6d7:function(t,e,n){"use strict";var a=n("21bb"),i=n.n(a);i.a}},[["d4bf","common/runtime","common/vendor"]]]);