(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tingche/tingcheCashier"],{"29c7":function(e,n,a){},"2ea2":function(e,n,a){"use strict";(function(e,t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){return a.e("components/cashier/cashier").then(a.bind(null,"2ddd"))},o={components:{cashier:i},data:function(){return{wxData:{plateNo:"",spaceNo:"",orderId:"",lRule1Id:"",busicom_name:"",amount:0,dbuyhours:"",counters:[]},providerList:[]}},onShow:function(){this.$checkLogin()},onLoad:function(n){var a=this;this.wxData={plateNo:n.plateNo,spaceNo:n.spaceNo,orderId:n.orderId,lRule1Id:n.lRule1Id,busicom_name:n.busicom_name,amount:n.amount/100,dbuyhours:n.dbuyhours,counters:JSON.parse(n.counters)};var i=this.wxData.counters;for(var o in i)null!=i[o]&&void 0!=i[o]&&(i[o].bank_codeWeixin?e.getProvider({service:"payment",success:function(e){e.provider.map(function(e){switch(e){case"wxpay":a.providerList.push({name:"微信",id:e,img:"../../static/cashier/wxpay.png"});break}})},fail:function(e){console.log(t("获取支付通道失败：",e," at pages\\tingche\\tingcheCashier.vue:88"))}}):i[o].bank_codeZhifubao?e.getProvider({service:"payment",success:function(e){e.provider.map(function(e){switch(e){case"alipay":a.providerList.push({name:"支付宝",id:e,img:"../../static/cashier/alipay.png"});break}})},fail:function(e){console.log(t("获取支付通道失败：",e," at pages\\tingche\\tingcheCashier.vue:111"))}}):i[o].bank_codeJhjh?this.providerList.push({name:"建行聚合",id:"ccb",img:"../../static/cashier/ccbpay.png"}):i[o].bank_codeShywt&&this.providerList.push({name:"一网通",id:"netcom",img:"../../static/cashier/netcompay.png"}))},methods:{requestPayment:function(n){var a=this;if(0!=this.providerList.length){var i=this.wxData,o={counter_ids:null,amountMoneyFloat:i.amount,dBuyHours:i.dbuyhours,lRule1Id:i.lRule1Id,orderId:i.orderId,plateNo:i.plateNo,spaceNo:i.spaceNo};if("wxpay"==n.id){for(var r in i.counters)if(i.counters[r].bank_codeWeixin){o.counter_ids=i.counters[r].counter_id;break}}else if("alipay"==n.id){for(var c in i.counters)if(i.counters[c].bank_codeZhifubao){o.counter_ids=i.counters[c].counter_id;break}}else if("ccb"==n.id){for(var s in i.counters)if(i.counters[s].bank_codeJhjh){o.counter_ids=i.counters[s].counter_id;break}}else if("netcom"==n.id)for(var u in i.counters)if(i.counters[u].bank_codeShywt){o.counter_ids=i.counters[u].counter_id;break}this.$http.request({url:"/wx/jsonPreparePayInCounter",data:o,method:"POST",dataType:"json",success:function(n){var t=n.data;if(t.success){t.sReqNo;t.counter_bank_codeIsWeixin?e.requestPayment({provider:"wxpay",orderInfo:{appid:t.prepayInfo.appid,noncestr:t.prepayInfo.noncestr,package:t.prepayInfo["package"],partnerid:t.prepayInfo.partnerid,prepayid:t.prepayInfo.prepayid,timestamp:Number(t.prepayInfo.timestamp),sign:t.prepayInfo.sign},success:function(n){a.$api.msg("支付成功"),e.navigateBack({delta:1})},fail:function(e){a.$api.msg("支付失败")}}):t.counter_bank_codeIsZhifubao?e.requestPayment({provider:"alipay",orderInfo:t.alipayReturnStr,success:function(n){a.$api.msg("支付成功"),e.navigateBack({delta:1})},fail:function(e){a.$api.msg("支付失败")}}):t.counter_bank_codeIsShywt?t.message?e.navigateTo({url:"../netcomCashier/netcomCashier?message="+t.message}):a.$api.msg(t.errorText):t.counter_bank_codeIsJhjh?a.$api.msg("建行聚合支付失败"):a.$api.msg("暂无该支付方式")}else a.$api.msg(t.errorText)},fail:function(e){console.log(t(e," at pages\\tingche\\tingcheCashier.vue:248"))}})}else this.$api.msg("暂无支付方式")}}};n.default=o}).call(this,a("6e42")["default"],a("0de9")["default"])},"6d2a":function(e,n,a){"use strict";var t=a("29c7"),i=a.n(t);i.a},9457:function(e,n,a){"use strict";(function(e){a("949b"),a("921b");t(a("66fd"));var n=t(a("a894"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,a("6e42")["createPage"])},a894:function(e,n,a){"use strict";a.r(n);var t=a("f71f"),i=a("c952");for(var o in i)"default"!==o&&function(e){a.d(n,e,function(){return i[e]})}(o);a("6d2a");var r,c=a("f0c5"),s=Object(c["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],r);n["default"]=s.exports},c952:function(e,n,a){"use strict";a.r(n);var t=a("2ea2"),i=a.n(t);for(var o in t)"default"!==o&&function(e){a.d(n,e,function(){return t[e]})}(o);n["default"]=i.a},f71f:function(e,n,a){"use strict";var t,i=function(){var e=this,n=e.$createElement;e._self._c},o=[];a.d(n,"b",function(){return i}),a.d(n,"c",function(){return o}),a.d(n,"a",function(){return t})}},[["9457","common/runtime","common/vendor"]]]);