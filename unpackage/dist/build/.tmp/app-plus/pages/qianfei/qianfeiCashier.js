(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qianfei/qianfeiCashier"],{"309e":function(e,a,n){"use strict";(function(e){n("949b"),n("921b");i(n("66fd"));var a=i(n("5d0d"));function i(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,n("6e42")["createPage"])},"5d0d":function(e,a,n){"use strict";n.r(a);var i=n("d294"),t=n("d572");for(var r in t)"default"!==r&&function(e){n.d(a,e,function(){return t[e]})}(r);n("6544");var o,s=n("f0c5"),c=Object(s["a"])(t["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);a["default"]=c.exports},6544:function(e,a,n){"use strict";var i=n("969d"),t=n.n(i);t.a},"7e79":function(e,a,n){"use strict";(function(e,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var t=function(){return n.e("components/cashier/cashier").then(n.bind(null,"2ddd"))},r={components:{cashier:t},data:function(){return{wxData:{},providerList:[]}},onShow:function(){this.$checkLogin()},onLoad:function(a){var n=this;this.wxData={reqStr:JSON.parse(a.reqStr),data:JSON.parse(a.data),origin:a.origin};var t=this.wxData.data.counters;for(var r in t)null!=t[r]&&void 0!=t[r]&&(t[r].bank_codeWeixin?e.getProvider({service:"payment",success:function(e){e.provider.map(function(e){switch(e){case"wxpay":n.providerList.push({name:"微信",id:e,img:"../../static/cashier/wxpay.png"});break;default:break}})},fail:function(e){console.log(i("获取支付通道失败：",e," at pages\\qianfei\\qianfeiCashier.vue:74"))}}):t[r].bank_codeZhifubao?e.getProvider({service:"payment",success:function(e){e.provider.map(function(e){switch(e){case"alipay":n.providerList.push({name:"支付宝",id:e,img:"../../static/cashier/alipay.png"});break;default:break}})},fail:function(e){console.log(i("获取支付通道失败：",e," at pages\\qianfei\\qianfeiCashier.vue:99"))}}):t[r].bank_codeJhjh?this.providerList.push({name:"建行聚合",id:"ccb",img:"../../static/cashier/ccbpay.png"}):t[r].bank_codeShywt&&this.providerList.push({name:"一网通",id:"netcom",img:"../../static/cashier/netcompay.png"}))},methods:{requestPayment:function(a){var n=this;if(0!=this.providerList.length){var t=this.wxData.data,r={counter_ids:null,amountMoneyFloat:t.result.total/100,origin:this.wxData.origin,reqStr:this.wxData.reqStr};if("wxpay"==a.id){for(var o in t.counters)if(t.counters[o].bank_codeWeixin){r.counter_ids=t.counters[o].counter_id;break}}else if("alipay"==a.id){for(var s in t.counters)if(t.counters[s].bank_codeZhifubao){r.counter_ids=t.counters[s].counter_id;break}}else if("ccb"==a.id){for(var c in t.counters)if(t.counters[c].bank_codeJhjh){r.counter_ids=t.counters[c].counter_id;break}}else if("netcom"==a.id)for(var u in t.counters)if(t.counters[u].bank_codeShywt){r.counter_ids=t.counters[u].counter_id;break}this.$http.request({url:"/wx/jsonPreparePayInCounter",data:r,success:function(a){var i=a.data;if(i.success){i.sReqNo;i.counter_bank_codeIsWeixin?e.requestPayment({provider:"wxpay",orderInfo:{appid:i.prepayInfo.appid,noncestr:i.prepayInfo.noncestr,package:i.prepayInfo["package"],partnerid:i.prepayInfo.partnerid,prepayid:i.prepayInfo.prepayid,timestamp:Number(i.prepayInfo.timestamp),sign:i.prepayInfo.sign},success:function(a){n.$api.msg("支付成功"),e.navigateBack({delta:1})},fail:function(e){n.$api.msg("支付失败")}}):i.counter_bank_codeIsZhifubao?e.requestPayment({provider:"alipay",orderInfo:i.alipayReturnStr,success:function(a){n.$api.msg("支付成功"),e.navigateBack({delta:1})},fail:function(e){n.$api.msg("支付失败")}}):i.counter_bank_codeIsShywt?i.message?e.navigateTo({url:"../netcomCashier/netcomCashier?message="+i.message}):n.$api.msg(i.errorText):i.counter_bank_codeIsJhjh?n.$api.msg("建行聚合支付失败"):n.$api.msg("暂无该支付方式")}else n.$api.msg(i.errorText)},fail:function(e){console.log(i(e," at pages\\qianfei\\qianfeiCashier.vue:230"))}})}else this.$api.msg("暂无支付方式")}}};a.default=r}).call(this,n("6e42")["default"],n("0de9")["default"])},"969d":function(e,a,n){},d294:function(e,a,n){"use strict";var i,t=function(){var e=this,a=e.$createElement;e._self._c},r=[];n.d(a,"b",function(){return t}),n.d(a,"c",function(){return r}),n.d(a,"a",function(){return i})},d572:function(e,a,n){"use strict";n.r(a);var i=n("7e79"),t=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(a,e,function(){return i[e]})}(r);a["default"]=t.a}},[["309e","common/runtime","common/vendor"]]]);